{% extends 'base.html' %}
{% block title %}My Requests | BMS{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">My Blood Requests</h3>
  <a class="btn btn-danger" href="{% url 'donations:request_create' %}">New Request</a>
 </div>
<div class="card shadow-sm">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table align-middle">
        <thead><tr><th>Date</th><th>Group</th><th>Units</th><th>Status</th></tr></thead>
        <tbody>
          {% for r in requests %}
          <tr>
            <td>{{ r.created_at|date:'Y-m-d H:i' }}</td>
            <td><span class="badge text-bg-danger">{{ r.blood_group }}</span></td>
            <td>{{ r.units }}</td>
            <td>
              {% if r.status == 'approved' %}<span class="badge text-bg-success">Approved</span>
              {% elif r.status == 'rejected' %}<span class="badge text-bg-secondary">Rejected</span>
              {% else %}<span class="badge text-bg-warning">Pending</span>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="4" class="text-body-secondary">No requests yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <nav>
      <ul class="pagination mb-0">
        {% if requests.has_previous %}
          <li class="page-item"><a class="page-link" href="?page={{ requests.previous_page_number }}">Previous</a></li>
        {% endif %}
        <li class="page-item disabled"><span class="page-link">Page {{ requests.number }} of {{ requests.paginator.num_pages }}</span></li>
        {% if requests.has_next %}
          <li class="page-item"><a class="page-link" href="?page={{ requests.next_page_number }}">Next</a></li>
        {% endif %}
      </ul>
    </nav>
  </div>
 </div>
{% endblock %}


